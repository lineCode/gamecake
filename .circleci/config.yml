version: 2
jobs:
  build:
    docker:
      - image: xriss/gamecake:release
    steps:
      - checkout
      - run:
          name: sync git
          command: git submodule sync
      - run:
          name: make
          command: build/gcc/make
      - run:
          name: test
          command: cd test ; ../exe/gamecake.x64 lua/unit.lua
      - store_artifacts:
          path: exe/gamecake.x64
