version: 2
jobs:
  build:
    docker:
      - image: ubuntu:16.04
    steps:
      - checkout
      - run:
          name: sync git
          command: git submodule sync
      - run:
          name: apt update
          command: sudo apt-get update
      - run:
          name: install dependencies
          command: build/depends/install
      - run:
          name: make
          command: build/gcc/make
      - run:
          name: test
          command: cd test ; ../exe/gamecake.x64 lua/unit.lua
